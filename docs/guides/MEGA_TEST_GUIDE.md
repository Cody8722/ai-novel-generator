# GLM-4 è¶…å¤§è¦æ¨¡åƒæ•¸æ¸¬è©¦æŒ‡å—

**ç‰ˆæœ¬**: v1.0
**æ—¥æœŸ**: 2026-01-16
**ç‹€æ…‹**: âœ… å·²å®Œæˆ

---

## ğŸ“‹ ç›®éŒ„

1. [ç³»çµ±æ¦‚è¿°](#ç³»çµ±æ¦‚è¿°)
2. [æ¸¬è©¦æ¶æ§‹](#æ¸¬è©¦æ¶æ§‹)
3. [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
4. [è©³ç´°ä½¿ç”¨](#è©³ç´°ä½¿ç”¨)
5. [çµæœåˆ†æ](#çµæœåˆ†æ)
6. [æœ€ä½³å¯¦è¸](#æœ€ä½³å¯¦è¸)
7. [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)

---

## ç³»çµ±æ¦‚è¿°

### ç‰¹æ€§

- **ğŸ¯ è¶…å¤§è¦æ¨¡**: æ”¯æŒ 600+ çµ„åƒæ•¸æ¸¬è©¦
- **ğŸ“¦ åˆ†æ‰¹åŸ·è¡Œ**: é¿å… API éè¼‰ï¼Œæ¯æ‰¹ 50 çµ„
- **ğŸ’¾ æ–·é»çºŒå‚³**: æ”¯æŒä¸­æ–·å¾Œæ¢å¾©
- **ğŸ“Š å¯¦æ™‚ä¿å­˜**: æ¯ 10 å€‹æ¸¬è©¦è‡ªå‹•ä¿å­˜é€²åº¦
- **ğŸ” ç³»çµ±æª¢æŸ¥**: å…¨é¢é©—è­‰ç³»çµ±å¥åº·ç‹€æ…‹
- **ğŸ“ˆ è©³ç´°åˆ†æ**: è‡ªå‹•ç”Ÿæˆåˆ†æå ±å‘Š

### ç³»çµ±çµ„æˆ

```
tests/
â”œâ”€â”€ test_glm4_params_mega.py     # è¶…å¤§è¦æ¨¡æ¸¬è©¦ä¸»ç¨‹åº
â”œâ”€â”€ system_health_check.py       # ç³»çµ±å¥åº·æª¢æŸ¥
â””â”€â”€ analyze_mega_results.py      # çµæœåˆ†æç³»çµ±

test_results/
â”œâ”€â”€ mega_test/                   # æ¸¬è©¦çµæœç›®éŒ„
â”‚   â”œâ”€â”€ batch_00_results.json   # æ‰¹æ¬¡çµæœ
â”‚   â”œâ”€â”€ batch_01_results.json
â”‚   â”œâ”€â”€ ...
â”‚   â”œâ”€â”€ checkpoint.json         # æª¢æŸ¥é»æ–‡ä»¶
â”‚   â”œâ”€â”€ quick_summary.json      # å¿«é€Ÿæ‘˜è¦
â”‚   â””â”€â”€ analysis_report_*.json  # åˆ†æå ±å‘Š
â””â”€â”€ health_check/               # å¥åº·æª¢æŸ¥çµæœ
```

---

## æ¸¬è©¦æ¶æ§‹

### ä¸‰éšæ®µæ¡æ¨£ç­–ç•¥

#### éšæ®µ 1: ç²—ç•¥æ¡æ¨£ï¼ˆ~200 çµ„ï¼‰

**ç›®æ¨™**: å¿«é€Ÿæ‰¾å‡ºå¤§è‡´æœ€ä½³å€é–“

**æ¸¬è©¦é¡å‹**:
- Temperature ä¸»å°æ¸¬è©¦ï¼ˆ10 çµ„ï¼‰
- Top_P ä¸»å°æ¸¬è©¦ï¼ˆ8 çµ„ï¼‰
- Repetition Penalty ä¸»å°æ¸¬è©¦ï¼ˆ8 çµ„ï¼‰
- Max Tokens ä¸»å°æ¸¬è©¦ï¼ˆ7 çµ„ï¼‰
- çµ„åˆæ¸¬è©¦ Temperature Ã— Top_Pï¼ˆ9 çµ„ï¼‰
- çµ„åˆæ¸¬è©¦ Temperature Ã— Penaltyï¼ˆ9 çµ„ï¼‰
- æ¥µç«¯å€¼æ¸¬è©¦ï¼ˆ4 çµ„ï¼‰

**åƒæ•¸ç¯„åœ**:
```python
temperature: [0.4, 0.5, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95]
top_p: [0.8, 0.82, 0.85, 0.88, 0.9, 0.92, 0.95, 0.98]
repetition_penalty: [0.95, 1.0, 1.03, 1.05, 1.08, 1.1, 1.15, 1.2]
max_tokens: [3000, 3500, 4000, 4500, 5000, 5500, 6000]
```

#### éšæ®µ 2: ç²¾ç´°æ¡æ¨£ï¼ˆ~300 çµ„ï¼‰

**ç›®æ¨™**: åœ¨æœ€ä½³å€é–“å…§ç´°åŒ–

**èšç„¦å€é–“**ï¼ˆåŸºæ–¼éšæ®µ 1 çµæœï¼‰:
```python
temperature: [0.65, 0.67, 0.69, 0.71, 0.73, 0.75]
top_p: [0.86, 0.87, 0.88, 0.89, 0.9, 0.91, 0.92, 0.93]
repetition_penalty: [1.01, 1.02, 1.03, 1.04, 1.05, 1.06, 1.07, 1.08, 1.09]
max_tokens: [3800, 4000, 4200, 4400, 4600, 4800, 5000]
```

**æ¸¬è©¦é¡å‹**:
- Temperature ç´°åŒ–ï¼ˆ54 çµ„ï¼‰
- Top_P ç´°åŒ–ï¼ˆ24 çµ„ï¼‰
- Penalty ç´°åŒ–ï¼ˆ9 çµ„ï¼‰
- Max_Tokens ç´°åŒ–ï¼ˆ7 çµ„ï¼‰
- å››ç¶­çµ„åˆï¼ˆ243 çµ„ï¼‰

#### éšæ®µ 3: é©—è­‰æ¡æ¨£ï¼ˆ~100 çµ„ï¼‰

**ç›®æ¨™**: é©—è­‰å‡è¨­å’Œç©©å®šæ€§

**æ¸¬è©¦é¡å‹**:
- ç©©å®šæ€§æ¸¬è©¦ï¼ˆ20 æ¬¡é‡è¤‡ï¼‰
- å¾®èª¿æ¸¬è©¦ï¼ˆæœ€ä½³åƒæ•¸å‘¨åœå¾®å°è®ŠåŒ–ï¼‰
- R1 å°æ¯”æ¸¬è©¦ï¼ˆèˆ‡ DeepSeek R1 æœ€ä½³åƒæ•¸å°æ¯”ï¼‰

---

## å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚

1. **ç’°å¢ƒé…ç½®**

```bash
# ç¢ºèª Python ç‰ˆæœ¬
python --version  # éœ€è¦ 3.11+

# ç¢ºèªä¾è³´å®‰è£
pip install -r requirements.txt

# ç¢ºèª API Key é…ç½®
cat .env | grep SILICONFLOW_API_KEY
```

2. **ç³»çµ±å¥åº·æª¢æŸ¥** â­ **å¼·çƒˆå»ºè­°å…ˆåŸ·è¡Œ**

```bash
# åŸ·è¡Œå®Œæ•´å¥åº·æª¢æŸ¥ï¼ˆç´„ 15 åˆ†é˜ï¼‰
python tests/system_health_check.py

# æˆ–åªæª¢æŸ¥ç‰¹å®šé …ç›®
python tests/system_health_check.py --check glm4-metrics
python tests/system_health_check.py --check api-stability
```

### åŸ·è¡Œæ¸¬è©¦

#### æ–¹æ³• 1: è‡ªå‹•åŸ·è¡Œæ‰€æœ‰æ‰¹æ¬¡ï¼ˆæ¨è–¦ï¼‰

```bash
# å®Œæ•´æ¸¬è©¦ï¼ˆ600+ çµ„ï¼Œç´„ 10-12 å°æ™‚ï¼‰
python tests/test_glm4_params_mega.py --run-all

# å¿«é€Ÿæ¨¡å¼ï¼ˆåƒ…ç”Ÿæˆå¤§ç¶±ï¼Œç´„ 5-6 å°æ™‚ï¼‰
python tests/test_glm4_params_mega.py --run-all --quick
```

#### æ–¹æ³• 2: åˆ†æ‰¹æ‰‹å‹•åŸ·è¡Œ

```bash
# åŸ·è¡Œæ‰¹æ¬¡ 0ï¼ˆç¬¬ 1 æ‰¹ï¼‰
python tests/test_glm4_params_mega.py --batch 0

# åŸ·è¡Œæ‰¹æ¬¡ 1ï¼ˆç¬¬ 2 æ‰¹ï¼‰
python tests/test_glm4_params_mega.py --batch 1

# ...ä¾æ­¤é¡æ¨åˆ°æ‰¹æ¬¡ 11
```

#### æ–¹æ³• 3: æ–·é»çºŒå‚³

```bash
# å¦‚æœæ¸¬è©¦ä¸­æ–·ï¼Œå¾ä¸Šæ¬¡é€²åº¦æ¢å¾©
python tests/test_glm4_params_mega.py --resume
```

### åˆ†æçµæœ

```bash
# ç”Ÿæˆå®Œæ•´åˆ†æå ±å‘Š
python tests/analyze_mega_results.py

# åªåˆ†æç‰¹å®šéšæ®µ
python tests/analyze_mega_results.py --stage coarse
python tests/analyze_mega_results.py --stage fine
python tests/analyze_mega_results.py --stage validation
```

---

## è©³ç´°ä½¿ç”¨

### test_glm4_params_mega.py

#### å®Œæ•´åƒæ•¸èªªæ˜

```bash
python tests/test_glm4_params_mega.py [OPTIONS]

OPTIONS:
  --batch N           åŸ·è¡ŒæŒ‡å®šæ‰¹æ¬¡ï¼ˆ0-11ï¼‰
  --run-all          åŸ·è¡Œæ‰€æœ‰æ‰¹æ¬¡
  --resume           å¾æª¢æŸ¥é»æ¢å¾©
  --quick            å¿«é€Ÿæ¨¡å¼ï¼ˆåƒ…ç”Ÿæˆå¤§ç¶±ï¼‰
  --batch-size N     æ¯æ‰¹æ¸¬è©¦æ•¸é‡ï¼ˆé»˜èª 50ï¼‰
```

#### ä½¿ç”¨ç¯„ä¾‹

**ç¯„ä¾‹ 1: åŸ·è¡Œå–®æ‰¹æ¸¬è©¦**

```bash
python tests/test_glm4_params_mega.py --batch 0
```

**è¼¸å‡º**:
```
============================================================
ğŸš€ é–‹å§‹æ‰¹æ¬¡ 1/12
============================================================

ğŸ“‹ æ‰¹æ¬¡åƒæ•¸æ•¸é‡: 50
ğŸ“ åƒæ•¸ç´¢å¼•ç¯„åœ: 0 - 49

ğŸ”¬ æ¸¬è©¦ 1/50 (ç¸½é€²åº¦: 1/600)
   åƒæ•¸: T=0.4, P=0.9, Pen=1.05, Tok=4000
   éšæ®µ: coarse, ç„¦é»: temperature
   âœ… æˆåŠŸ - ç¸½åˆ†: 75/120
   â³ ç­‰å¾… 3.2 ç§’...

...ï¼ˆçœç•¥ 48 å€‹æ¸¬è©¦ï¼‰...

============================================================
âœ… æ‰¹æ¬¡ 1 å®Œæˆ
============================================================
æˆåŠŸ: 48/50
å¤±æ•—: 2/50
çµæœå·²ä¿å­˜: test_results/mega_test/batch_00_results.json
```

**ç¯„ä¾‹ 2: å¿«é€Ÿæ¨¡å¼åŸ·è¡Œæ‰€æœ‰æ‰¹æ¬¡**

```bash
python tests/test_glm4_params_mega.py --run-all --quick
```

**å„ªé»**:
- âš¡ é€Ÿåº¦å¿«ï¼ˆç´„ 5-6 å°æ™‚ï¼‰
- ğŸ’° æˆæœ¬ä½ï¼ˆåƒ…ç”Ÿæˆå¤§ç¶±ï¼‰
- ğŸ“Š ä»èƒ½å¾—åˆ°åƒæ•¸è©•åˆ†æ•¸æ“š

**ç¼ºé»**:
- âŒ ç„¡ç« ç¯€ç”Ÿæˆé©—è­‰
- âŒ ç„¡å®Œæ•´å°èªªå“è³ªæª¢æŸ¥

**ç¯„ä¾‹ 3: ä¸­æ–·å¾Œæ¢å¾©**

```bash
# å‡è¨­åœ¨æ‰¹æ¬¡ 3 åŸ·è¡Œåˆ°ä¸€åŠæ™‚ä¸­æ–·
# é‹è¡Œä»¥ä¸‹å‘½ä»¤å°‡å¾æ‰¹æ¬¡ 3 ç¹¼çºŒ
python tests/test_glm4_params_mega.py --resume
```

**è¼¸å‡º**:
```
å·²å®Œæˆæ‰¹æ¬¡: [0, 1, 2]
å¾æ‰¹æ¬¡ 4 æ¢å¾©...
```

### system_health_check.py

#### æª¢æŸ¥é …ç›®

1. **GLM-4 ç‰¹æœ‰æŒ‡æ¨™åŠŸèƒ½** (`--check glm4-metrics`)
   - ç”Ÿæˆ 10 å€‹æ¸¬è©¦å¤§ç¶±
   - æª¢æŸ¥ä¸­æ–‡æµæš¢åº¦ã€æ–‡åŒ–åº•è˜Šã€å‰µæ„æ€§ã€é‚è¼¯é€£è²«æ€§
   - é©—è­‰é›¶å€¼æ¯”ä¾‹æ˜¯å¦ç•°å¸¸

2. **åƒæ•¸å½±éŸ¿åˆ†æ** (`--check param-impact`)
   - æ¸¬è©¦ Temperatureã€Top_Pã€Penalty çš„ç¨ç«‹å½±éŸ¿
   - åˆ†æåƒæ•¸è¶¨å‹¢ï¼ˆä¸Šå‡/ä¸‹é™/ç©©å®šï¼‰
   - æ‰¾å‡ºæ¯å€‹åƒæ•¸çš„æœ€ä½³å€¼

3. **è©•åˆ†ä¸€è‡´æ€§** (`--check scoring-consistency`)
   - ä½¿ç”¨ç›¸åŒåƒæ•¸ç”Ÿæˆ 5 æ¬¡
   - è¨ˆç®—æ¨™æº–å·®å’Œè®Šç•°ä¿‚æ•¸
   - åˆ¤æ–·è©•åˆ†ç©©å®šæ€§

4. **API ç©©å®šæ€§** (`--check api-stability`)
   - åŸ·è¡Œ 10 æ¬¡é€£çºŒè«‹æ±‚
   - è¨ˆç®—æˆåŠŸç‡å’ŒéŸ¿æ‡‰æ™‚é–“
   - æª¢æ¸¬ API å¯é æ€§

#### ä½¿ç”¨ç¯„ä¾‹

**ç¯„ä¾‹ 1: å®Œæ•´å¥åº·æª¢æŸ¥**

```bash
python tests/system_health_check.py
```

**è¼¸å‡º**:
```
============================================================
ğŸ¥ é–‹å§‹ç³»çµ±å¥åº·æª¢æŸ¥
============================================================

============================================================
ğŸ” æª¢æŸ¥ GLM-4 ç‰¹æœ‰æŒ‡æ¨™
============================================================

ğŸ“ ç”Ÿæˆ 10 å€‹æ¸¬è©¦å¤§ç¶±...
  æ¸¬è©¦ 1/10...
  ...

ğŸ“Š åˆ†ææŒ‡æ¨™æ•¸æ“š...

  chinese_fluency:
    æ•¸æ“šé»: 10
    å¹³å‡å€¼: 0.92
    æœ€å°å€¼: 0.80
    æœ€å¤§å€¼: 1.00
    éé›¶æ¯”ä¾‹: 10/10 (100.0%)
    âœ… chinese_fluency è¡¨ç¾æ­£å¸¸

...ï¼ˆçœç•¥å…¶ä»–æŒ‡æ¨™ï¼‰...

âœ… GLM-4 æŒ‡æ¨™æª¢æŸ¥é€šé

============================================================
ğŸ” æª¢æŸ¥åƒæ•¸ç¨ç«‹å½±éŸ¿
============================================================

ğŸ“ˆ æ¸¬è©¦ Temperature å½±éŸ¿...
  Temperature = 0.5
    åˆ†æ•¸: 70/120
  ...

  Temperature è¶¨å‹¢åˆ†æ:
    è¶¨å‹¢: Temperature å¢åŠ æ™‚åˆ†æ•¸ä¸Šå‡
    æœ€ä½³å€¼: 0.7 (åˆ†æ•¸: 85)
    åˆ†æ•¸ç¯„åœ: 70 - 88

...ï¼ˆçœç•¥å…¶ä»–åƒæ•¸ï¼‰...

âœ… åƒæ•¸å½±éŸ¿æª¢æŸ¥é€šé

============================================================
ğŸ“‹ å¥åº·æª¢æŸ¥æ‘˜è¦
============================================================
âœ… glm4_metrics: HEALTHY
âœ… param_impact: HEALTHY
âœ… scoring_consistency: HEALTHY
âœ… api_stability: HEALTHY

æ•´é«”ç‹€æ…‹: HEALTHY
ç¸½è€—æ™‚: 856.3ç§’
å ±å‘Šå·²ä¿å­˜: test_results/health_check/health_check_20260116_123456.json
============================================================
```

**ç¯„ä¾‹ 2: åªæª¢æŸ¥ API ç©©å®šæ€§**

```bash
python tests/system_health_check.py --check api-stability
```

### analyze_mega_results.py

#### åˆ†æå…§å®¹

1. **éšæ®µåˆ†æ**: æŒ‰ç²—ç•¥/ç²¾ç´°/é©—è­‰éšæ®µçµ±è¨ˆ
2. **åƒæ•¸åˆ†æ**: æ‰¾å‡ºæ¯å€‹åƒæ•¸çš„æœ€ä½³å€¼å’Œè¶¨å‹¢
3. **æœ€ä½³çµ„åˆ**: Top 10 æœ€é«˜åˆ†åƒæ•¸çµ„åˆ
4. **ç©©å®šæ€§åˆ†æ**: é‡è¤‡æ¸¬è©¦çš„æ¨™æº–å·®å’Œè®Šç•°ä¿‚æ•¸
5. **å„ªåŒ–å»ºè­°**: åŸºæ–¼æ•¸æ“šçš„åƒæ•¸å»ºè­°

#### ä½¿ç”¨ç¯„ä¾‹

**ç¯„ä¾‹ 1: å®Œæ•´åˆ†æ**

```bash
python tests/analyze_mega_results.py
```

**è¼¸å‡º**:
```
============================================================
ğŸ”¬ é–‹å§‹åˆ†æè¶…å¤§è¦æ¨¡æ¸¬è©¦çµæœ
============================================================

ğŸ“‚ åŠ è¼‰æ¸¬è©¦çµæœ...
æ‰¾åˆ° 12 å€‹æ‰¹æ¬¡çµæœæ–‡ä»¶
  âœ… batch_00_results.json: 50 çµ„
  âœ… batch_01_results.json: 50 çµ„
  ...

âœ… æˆåŠŸåŠ è¼‰ 600 çµ„æ¸¬è©¦çµæœ
   æˆåŠŸ: 582
   å¤±æ•—: 18

ğŸ“Š æŒ‰éšæ®µåˆ†æ...

  éšæ®µ: coarse
    æ¸¬è©¦æ•¸: 200
    å¹³å‡åˆ†: 78.5/120
    æœ€é«˜åˆ†: 92/120
    æœ€ä½åˆ†: 65/120
    æœ€ä½³åƒæ•¸: {'temperature': 0.7, 'top_p': 0.9, ...}

  éšæ®µ: fine
    æ¸¬è©¦æ•¸: 300
    å¹³å‡åˆ†: 85.2/120
    æœ€é«˜åˆ†: 98/120
    æœ€ä½åˆ†: 72/120
    æœ€ä½³åƒæ•¸: {'temperature': 0.71, 'top_p': 0.9, ...}

  éšæ®µ: validation
    æ¸¬è©¦æ•¸: 82
    å¹³å‡åˆ†: 87.1/120
    æœ€é«˜åˆ†: 95/120
    æœ€ä½åˆ†: 80/120
    æœ€ä½³åƒæ•¸: {'temperature': 0.7, 'top_p': 0.9, ...}

ğŸ“Š æŒ‰åƒæ•¸åˆ†æ...

  åƒæ•¸: temperature
    Top 5 å€¼:
      1. 0.71: 89.2/120 (n=18)
      2. 0.7: 88.5/120 (n=45)
      3. 0.69: 87.8/120 (n=18)
      4. 0.73: 86.9/120 (n=18)
      5. 0.75: 85.2/120 (n=12)

  åƒæ•¸: top_p
    Top 5 å€¼:
      1. 0.9: 88.7/120 (n=98)
      2. 0.89: 88.1/120 (n=18)
      3. 0.91: 87.5/120 (n=18)
      4. 0.92: 86.8/120 (n=32)
      5. 0.88: 85.9/120 (n=24)

...ï¼ˆçœç•¥å…¶ä»–åƒæ•¸ï¼‰...

ğŸ† å°‹æ‰¾æœ€ä½³åƒæ•¸çµ„åˆ (Top 10)...

  æ’å  åˆ†æ•¸    Temperature  Top_P  Penalty  Tokens  éšæ®µ
  ----------------------------------------------------------------------
  # 1   98.0     0.71       0.90    1.05     4000   fine
  # 2   96.5     0.70       0.90    1.05     4200   fine
  # 3   95.8     0.71       0.89    1.05     4000   fine
  # 4   94.2     0.69       0.90    1.04     4000   fine
  # 5   93.7     0.70       0.90    1.06     4000   fine
  # 6   92.8     0.73       0.90    1.05     4000   fine
  # 7   92.5     0.70       0.92    1.05     4000   fine
  # 8   91.9     0.70       0.88    1.05     4000   fine
  # 9   91.2     0.67       0.90    1.05     4000   fine
  #10   90.8     0.75       0.90    1.05     4000   coarse

ğŸ” åˆ†æç©©å®šæ€§...

  æœ€ç©©å®šçš„åƒæ•¸çµ„åˆ (æ¨™æº–å·®æœ€å°):
  æ’å  å¹³å‡åˆ†  æ¨™æº–å·®  CV     é‡è¤‡æ¬¡æ•¸
  --------------------------------------------------
  #1    87.2   2.15   2.47%   20
  #2    86.8   2.83   3.26%   5
  #3    85.9   3.12   3.63%   5
  #4    84.5   3.87   4.58%   5
  #5    83.2   4.21   5.06%   5

ğŸ’¡ ç”Ÿæˆå„ªåŒ–å»ºè­°...

  1. æœ€ä½³ temperature å€¼ç‚º 0.71ï¼ˆå¹³å‡åˆ† 89.2ï¼‰
     åƒæ•¸: {'temperature': 0.71, 'top_p': 0.9, 'repetition_penalty': 1.05, 'max_tokens': 4000}
  2. æœ€ä½³ top_p å€¼ç‚º 0.9ï¼ˆå¹³å‡åˆ† 88.7ï¼‰
     åƒæ•¸: {'temperature': 0.7, 'top_p': 0.9, 'repetition_penalty': 1.05, 'max_tokens': 4000}
  3. æœ€ä½³åƒæ•¸çµ„åˆå¾—åˆ† 98.0/120
     åƒæ•¸: {'temperature': 0.71, 'top_p': 0.9, 'repetition_penalty': 1.05, 'max_tokens': 4000}
  4. æœ€ç©©å®šçš„åƒæ•¸çµ„åˆï¼ˆæ¨™æº–å·® 2.15ï¼‰
     åƒæ•¸: {'temperature': 0.7, 'top_p': 0.9, 'repetition_penalty': 1.05, 'max_tokens': 4000}

âœ… å ±å‘Šå·²ä¿å­˜:
   JSON: test_results/mega_test/analysis_report_20260116_145230.json
   Markdown: test_results/mega_test/analysis_report_20260116_145230.md

============================================================
âœ… åˆ†æå®Œæˆ
============================================================
```

---

## çµæœåˆ†æ

### å ±å‘Šæ–‡ä»¶

åŸ·è¡Œå®Œæˆå¾Œï¼Œæœƒç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
test_results/mega_test/
â”œâ”€â”€ batch_00_results.json       # å„æ‰¹æ¬¡è©³ç´°çµæœ
â”œâ”€â”€ batch_01_results.json
â”œâ”€â”€ ...
â”œâ”€â”€ checkpoint.json             # æª¢æŸ¥é»ï¼ˆç”¨æ–¼çºŒå‚³ï¼‰
â”œâ”€â”€ quick_summary.json          # å¿«é€Ÿæ‘˜è¦
â”œâ”€â”€ analysis_report_*.json      # è©³ç´°åˆ†æå ±å‘Šï¼ˆJSONï¼‰
â””â”€â”€ analysis_report_*.md        # è©³ç´°åˆ†æå ±å‘Šï¼ˆMarkdownï¼‰
```

### å¿«é€Ÿæ‘˜è¦ (quick_summary.json)

```json
{
  "total_tests": 600,
  "successful": 582,
  "failed": 18,
  "success_rate": 0.97,
  "avg_score": 84.3,
  "max_score": 98.0,
  "min_score": 62.5,
  "timestamp": "2026-01-16T14:52:30"
}
```

### è©³ç´°åˆ†æå ±å‘Š (analysis_report_*.md)

å®Œæ•´çš„ Markdown å ±å‘Šï¼ŒåŒ…å«ï¼š
- ç¸½é«”çµ±è¨ˆ
- éšæ®µåˆ†æ
- åƒæ•¸åˆ†æ
- æœ€ä½³çµ„åˆ Top 10
- å„ªåŒ–å»ºè­°

---

## æœ€ä½³å¯¦è¸

### 1. æ¸¬è©¦å‰æº–å‚™

âœ… **DO**:
- å…ˆåŸ·è¡Œç³»çµ±å¥åº·æª¢æŸ¥
- ç¢ºèª API Key æœ‰æ•ˆä¸”é¤˜é¡å……è¶³
- æª¢æŸ¥ç£ç¢Ÿç©ºé–“ï¼ˆè‡³å°‘ 1GBï¼‰
- ä½¿ç”¨å¿«é€Ÿæ¨¡å¼é€²è¡Œåˆæ­¥æ¸¬è©¦

âŒ **DON'T**:
- è·³éå¥åº·æª¢æŸ¥ç›´æ¥åŸ·è¡Œ
- åœ¨ç¶²çµ¡ä¸ç©©å®šæ™‚åŸ·è¡Œé•·æ™‚é–“æ¸¬è©¦
- åŒæ™‚é‹è¡Œå¤šå€‹æ¸¬è©¦å¯¦ä¾‹

### 2. æ¸¬è©¦åŸ·è¡Œ

âœ… **DO**:
- ä½¿ç”¨ `--run-all` è‡ªå‹•åŸ·è¡Œï¼ˆæ¨è–¦ï¼‰
- å®šæœŸæª¢æŸ¥é€²åº¦å’Œæ—¥èªŒ
- ä¿ç•™æª¢æŸ¥é»æ–‡ä»¶ä»¥ä¾¿çºŒå‚³
- ä½¿ç”¨ `nohup` æˆ– `screen` é€²è¡Œå¾Œå°åŸ·è¡Œ

âŒ **DON'T**:
- æ‰‹å‹•ä¸­æ–·æ­£åœ¨åŸ·è¡Œçš„æ‰¹æ¬¡
- åœ¨æ¸¬è©¦éç¨‹ä¸­ä¿®æ”¹ä»£ç¢¼
- åˆªé™¤æœªå®Œæˆçš„æ‰¹æ¬¡çµæœæ–‡ä»¶

### 3. çµæœåˆ†æ

âœ… **DO**:
- å®Œæ•´æ¸¬è©¦å¾Œå†é€²è¡Œåˆ†æ
- é—œæ³¨ç©©å®šæ€§æŒ‡æ¨™
- çµåˆå¤šå€‹æŒ‡æ¨™ç¶œåˆè©•ä¼°
- ä¿å­˜åˆ†æå ±å‘Šä»¥ä¾¿å°æ¯”

âŒ **DON'T**:
- åƒ…åŸºæ–¼å–®ä¸€æ‰¹æ¬¡çµæœä¸‹çµè«–
- å¿½ç•¥å¤±æ•—æ¸¬è©¦çš„åŸå› 
- åªçœ‹æœ€é«˜åˆ†è€Œå¿½ç•¥ç©©å®šæ€§

### 4. åƒæ•¸å„ªåŒ–

âœ… **DO**:
- å„ªå…ˆé¸æ“‡ç©©å®šæ€§é«˜çš„åƒæ•¸
- è€ƒæ…®æˆæœ¬èˆ‡æ•ˆæœçš„å¹³è¡¡
- åœ¨ç”Ÿç”¢ç’°å¢ƒå‰é€²è¡Œå°è¦æ¨¡é©—è­‰
- è¨˜éŒ„åƒæ•¸è®Šæ›´æ­·å²

âŒ **DON'T**:
- ç›²ç›®è¿½æ±‚æœ€é«˜åˆ†
- å¿½ç•¥é‚Šç•Œæƒ…æ³æ¸¬è©¦
- åœ¨ç”Ÿç”¢ç’°å¢ƒç›´æ¥æ‡‰ç”¨æ¥µç«¯åƒæ•¸

---

## å¸¸è¦‹å•é¡Œ

### Q1: æ¸¬è©¦åŸ·è¡Œæ™‚é–“å¤ªé•·æ€éº¼è¾¦ï¼Ÿ

**A**: æœ‰å¹¾å€‹å„ªåŒ–é¸é …ï¼š

1. **ä½¿ç”¨å¿«é€Ÿæ¨¡å¼**:
   ```bash
   python tests/test_glm4_params_mega.py --run-all --quick
   ```
   æ™‚é–“æ¸›å°‘ç´„ 50%ï¼Œä½†ä»èƒ½å¾—åˆ°åƒæ•¸è©•åˆ†ã€‚

2. **æ¸›å°æ‰¹æ¬¡å¤§å°**:
   ```bash
   python tests/test_glm4_params_mega.py --run-all --batch-size 25
   ```
   æ›´é »ç¹çš„æª¢æŸ¥é»ä¿å­˜ï¼Œä½†æ‰¹æ¬¡æ•¸ç¿»å€ã€‚

3. **åˆ†éšæ®µåŸ·è¡Œ**:
   å…ˆåªåŸ·è¡Œéšæ®µ 1ï¼ˆç²—ç•¥æ¡æ¨£ï¼‰ï¼Œåˆ†æå¾Œå†æ±ºå®šæ˜¯å¦ç¹¼çºŒã€‚

### Q2: API è«‹æ±‚å¤±æ•—ç‡é«˜æ€éº¼è¾¦ï¼Ÿ

**A**:

1. **æª¢æŸ¥ API ç©©å®šæ€§**:
   ```bash
   python tests/system_health_check.py --check api-stability
   ```

2. **å¢åŠ é‡è©¦å»¶é²**:
   ä¿®æ”¹ `test_glm4_params_mega.py` ä¸­çš„å»¶é²æ™‚é–“ï¼š
   ```python
   time.sleep(random.uniform(5, 8))  # å¢åŠ åˆ° 5-8 ç§’
   ```

3. **åˆ†æ‰¹æ¬¡åŸ·è¡Œ**:
   æ‰‹å‹•åŸ·è¡Œå„æ‰¹æ¬¡ï¼Œæ‰¹æ¬¡é–“å¢åŠ æ›´é•·ä¼‘æ¯æ™‚é–“ã€‚

### Q3: æª¢æŸ¥é»æ–‡ä»¶æå£æ€éº¼è¾¦ï¼Ÿ

**A**:

1. **åˆªé™¤æå£çš„æª¢æŸ¥é»**:
   ```bash
   rm test_results/mega_test/checkpoint.json
   ```

2. **å¾æœ€å¾Œå®Œæˆçš„æ‰¹æ¬¡æ¢å¾©**:
   ```bash
   # å‡è¨­æ‰¹æ¬¡ 0-4 å·²å®Œæˆï¼Œå¾æ‰¹æ¬¡ 5 é–‹å§‹
   python tests/test_glm4_params_mega.py --batch 5
   ```

3. **é‡å»ºæª¢æŸ¥é»**:
   æª¢æŸ¥é»æœƒåœ¨ä¸‹æ¬¡åŸ·è¡Œæ™‚è‡ªå‹•é‡å»ºã€‚

### Q4: å¦‚ä½•è§£è®€ GLM-4 æŒ‡æ¨™é›¶å€¼ï¼Ÿ

**A**:

1. **æ­£å¸¸æƒ…æ³**:
   - é›¶å€¼æ¯”ä¾‹ < 20% ç‚ºæ­£å¸¸
   - æŸäº›å¤§ç¶±ç¢ºå¯¦å¯èƒ½ä¸åŒ…å«ç‰¹å®šæ–‡åŒ–å…ƒç´ 

2. **ç•°å¸¸æƒ…æ³**:
   - é›¶å€¼æ¯”ä¾‹ > 50% å¯èƒ½æœ‰å•é¡Œ
   - é‹è¡Œå¥åº·æª¢æŸ¥é€²è¡Œè¨ºæ–·

3. **è§£æ±ºæ–¹æ³•**:
   ```bash
   # æª¢æŸ¥è©•åˆ†ç³»çµ±
   python tests/test_glm4_quick_verify.py

   # å®Œæ•´å¥åº·æª¢æŸ¥
   python tests/system_health_check.py --check glm4-metrics
   ```

### Q5: åˆ†æå ±å‘Šé¡¯ç¤ºæ•¸æ“šä¸è¶³æ€éº¼è¾¦ï¼Ÿ

**A**:

1. **æª¢æŸ¥æ¸¬è©¦å®Œæˆåº¦**:
   ```bash
   # æŸ¥çœ‹å·²å®Œæˆçš„æ‰¹æ¬¡
   ls test_results/mega_test/batch_*_results.json | wc -l
   ```

2. **è£œå……åŸ·è¡Œæœªå®Œæˆçš„æ‰¹æ¬¡**:
   ```bash
   python tests/test_glm4_params_mega.py --resume
   ```

3. **é™ä½åˆ†æè¦æ±‚**:
   å³ä½¿æ•¸æ“šä¸å®Œæ•´ï¼Œä»å¯é€²è¡Œéšæ®µæ€§åˆ†æï¼š
   ```bash
   python tests/analyze_mega_results.py --stage coarse
   ```

### Q6: å¦‚ä½•é¸æ“‡æœ€ä½³åƒæ•¸ï¼Ÿ

**A**: ç¶œåˆè€ƒæ…®å¤šå€‹å› ç´ ï¼š

1. **åˆ†æ•¸å„ªå…ˆ** (ç›®æ¨™: æœ€é«˜å“è³ª)
   - é¸æ“‡ Top 1 åƒæ•¸çµ„åˆ
   - é©åˆå°èªªç”Ÿæˆã€å…§å®¹å‰µä½œ

2. **ç©©å®šæ€§å„ªå…ˆ** (ç›®æ¨™: å¯é æ¸¬æ€§)
   - é¸æ“‡æ¨™æº–å·®æœ€å°çš„çµ„åˆ
   - é©åˆæ‰¹é‡ç”Ÿæˆã€è‡ªå‹•åŒ–å ´æ™¯

3. **æˆæœ¬å„ªå…ˆ** (ç›®æ¨™: ç¶“æ¿Ÿæ€§)
   - é¸æ“‡ max_tokens è¼ƒå°çš„çµ„åˆ
   - åœ¨å¯æ¥å—åˆ†æ•¸ç¯„åœå…§æœ€å°åŒ–æˆæœ¬

4. **å¹³è¡¡é¸æ“‡** (æ¨è–¦)
   - åˆ†æ•¸ Top 5 å…§
   - æ¨™æº–å·® < 5
   - max_tokens â‰¤ 4500

### Q7: æ¸¬è©¦çµæœå¦‚ä½•æ‡‰ç”¨åˆ°ç”Ÿç”¢ï¼Ÿ

**A**: å»ºè­°çš„æµç¨‹ï¼š

1. **å°è¦æ¨¡é©—è­‰** (10-20 ç« )
   ```bash
   # ä½¿ç”¨æœ€ä½³åƒæ•¸ç”Ÿæˆæ¸¬è©¦å°èªª
   python tests/test_generate.py --params best_params.json
   ```

2. **äººå·¥è©•ä¼°**
   - æª¢æŸ¥å…§å®¹å“è³ª
   - é©—è­‰é¢¨æ ¼ä¸€è‡´æ€§
   - è©•ä¼°å‰µæ„åº¦

3. **A/B æ¸¬è©¦**
   - å°æ¯”æ–°èˆŠåƒæ•¸
   - æ”¶é›†ç”¨æˆ¶åé¥‹
   - ç›£æ§é—œéµæŒ‡æ¨™

4. **é€æ­¥æ¨å»£**
   - å…ˆæ‡‰ç”¨åˆ° 10% æµé‡
   - ç›£æ§ 1-2 é€±
   - é€æ­¥æ“´å¤§åˆ° 100%

---

## é™„éŒ„

### A. åƒæ•¸ç¯„åœå»ºè­°

åŸºæ–¼æ¸¬è©¦ç¶“é©—ï¼Œå„åƒæ•¸çš„å»ºè­°ç¯„åœï¼š

| åƒæ•¸ | æœ€å°å€¼ | æ¨è–¦ç¯„åœ | æœ€å¤§å€¼ | èªªæ˜ |
|------|--------|----------|--------|------|
| temperature | 0.3 | 0.65-0.75 | 1.0 | å‰µæ„åº¦æ§åˆ¶ |
| top_p | 0.8 | 0.88-0.92 | 0.99 | è©å½™å¤šæ¨£æ€§ |
| repetition_penalty | 0.9 | 1.03-1.08 | 1.3 | é‡è¤‡æ‡²ç½° |
| max_tokens | 3000 | 4000-4500 | 7000 | è¼¸å‡ºé•·åº¦ |

### B. æˆæœ¬ä¼°ç®—

ä»¥ GLM-4 åƒ¹æ ¼ç‚ºæº–ï¼ˆÂ¥0.001/1K tokensï¼‰:

| æ¸¬è©¦è¦æ¨¡ | Token æ¶ˆè€— | é ä¼°æˆæœ¬ | è€—æ™‚ |
|---------|-----------|---------|------|
| å–®æ‰¹ (50çµ„) | ~250K | ~Â¥0.25 | ~1å°æ™‚ |
| éšæ®µ1 (200çµ„) | ~1M | ~Â¥1.00 | ~4å°æ™‚ |
| éšæ®µ2 (300çµ„) | ~1.5M | ~Â¥1.50 | ~6å°æ™‚ |
| éšæ®µ3 (100çµ„) | ~500K | ~Â¥0.50 | ~2å°æ™‚ |
| **å®Œæ•´æ¸¬è©¦ (600çµ„)** | **~3M** | **~Â¥3.00** | **~12å°æ™‚** |

å¿«é€Ÿæ¨¡å¼æˆæœ¬ç´„ç‚ºæ­£å¸¸æ¨¡å¼çš„ 60-70%ã€‚

### C. ç³»çµ±è³‡æºéœ€æ±‚

**æœ€ä½è¦æ±‚**:
- CPU: é›™æ ¸ 2.0GHz+
- RAM: 4GB+
- ç£ç¢Ÿ: 2GB å¯ç”¨ç©ºé–“
- ç¶²çµ¡: ç©©å®šé€£æ¥ï¼Œä¸Šè¡Œ 1Mbps+

**æ¨è–¦é…ç½®**:
- CPU: å››æ ¸ 3.0GHz+
- RAM: 8GB+
- ç£ç¢Ÿ: 10GB å¯ç”¨ç©ºé–“ï¼ˆå«çµæœæ–‡ä»¶ï¼‰
- ç¶²çµ¡: ç©©å®šé€£æ¥ï¼Œä¸Šè¡Œ 5Mbps+

---

## è¯ç¹«èˆ‡æ”¯æŒ

**å•é¡Œåé¥‹**: [GitHub Issues](https://github.com/Cody8722/ai-novel-generator/issues)
**æŠ€è¡“æ–‡æª”**: [é …ç›®æ–‡æª”](../../README.md)
**æ¸¬è©¦å ±å‘Š**: [æ¸¬è©¦å ±å‘Šç›®éŒ„](../reports/)

---

**æœ€å¾Œæ›´æ–°**: 2026-01-16
**ç‰ˆæœ¬**: v1.0
**ç¶­è­·è€…**: @agent-architect
